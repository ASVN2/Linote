{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useReducer, useState, useEffect } from 'react';\nimport { db } from '../firebase/config';\n\n//firebase imports\nimport { addDoc, collection, deleteDoc } from 'firebase/firestore';\nlet initState = {\n  document: null,\n  isPending: false,\n  error: null,\n  success: null\n};\nexport const firebaseReducer = (state, action) => {\n  switch (action.type) {\n    case 'IS_PENDING':\n      return {\n        isPending: true,\n        document: null,\n        error: null,\n        success: false\n      };\n    case 'ADDED_DOCUMENT':\n      return {\n        isPending: false,\n        document: action.payload,\n        error: null,\n        success: true\n      };\n    case 'ERROR':\n      return {\n        isPending: false,\n        document: null,\n        error: action.payload,\n        success: false\n      };\n    case 'DELETED_DOCUMENT':\n      return {\n        isPending: false,\n        document: action.payload,\n        error: null,\n        success: true\n      };\n    default:\n      return state;\n  }\n};\nexport const Firebase = col => {\n  _s();\n  const [response, dispatch] = useReducer(firebaseReducer, initState);\n  const [isCancelled, setIsCancelled] = useState(false);\n\n  // function check for is it isCancelled or not and then dispatch the action\n  const dispatchCanlled = action => {\n    if (!isCancelled) {\n      dispatch(action);\n    }\n  };\n  let ref = collection(db, col);\n\n  // add document\n  const addDocument = async mdoc => {\n    dispatch({\n      type: 'IS_PENDING'\n    });\n    try {\n      const addedDoc = await addDoc(ref, mdoc);\n      dispatchCanlled({\n        type: 'ADDED_DOCUMENT',\n        payload: addedDoc\n      });\n    } catch (error) {}\n    console.log(mdoc);\n  };\n\n  // remove document\n\n  const removeDoc = async id => {\n    dispatch({\n      type: 'IS_PENDING'\n    });\n    try {\n      const deleteddoc = await deleteDoc(doc(db, col, id));\n      dispatchCanlled({\n        type: 'DELETED_DOCUMENT',\n        payload: deleteddoc\n      });\n    } catch (error) {}\n  };\n  return {\n    addDocument\n  };\n};\n_s(Firebase, \"8MBvw9JjFyCCDommLFTw+NXfJ6w=\");\n_c = Firebase;\nvar _c;\n$RefreshReg$(_c, \"Firebase\");","map":{"version":3,"names":["useReducer","useState","useEffect","db","addDoc","collection","deleteDoc","initState","document","isPending","error","success","firebaseReducer","state","action","type","payload","Firebase","col","_s","response","dispatch","isCancelled","setIsCancelled","dispatchCanlled","ref","addDocument","mdoc","addedDoc","console","log","removeDoc","id","deleteddoc","doc","_c","$RefreshReg$"],"sources":["/home/av/Desktop/linote/src/hooks/useFirebase.js"],"sourcesContent":["import { useReducer, useState, useEffect } from 'react';\nimport { db } from '../firebase/config';\n\n//firebase imports\nimport { addDoc, collection, deleteDoc } from 'firebase/firestore';\n\nlet initState = {\n  document: null,\n  isPending: false,\n  error: null,\n  success: null,\n};\n\nexport const firebaseReducer = (state, action) => {\n  switch (action.type) {\n    case 'IS_PENDING':\n      return { isPending: true, document: null, error: null, success: false };\n    case 'ADDED_DOCUMENT':\n      return { isPending: false, document: action.payload, error: null, success: true };\n    case 'ERROR':\n      return { isPending: false, document: null, error: action.payload, success: false };\n    case 'DELETED_DOCUMENT':\n      return { isPending: false, document: action.payload, error: null, success: true };\n\n    default:\n      return state;\n  }\n};\n\nexport const Firebase = (col) => {\n  const [response, dispatch] = useReducer(firebaseReducer, initState);\n  const [isCancelled, setIsCancelled] = useState(false);\n\n  // function check for is it isCancelled or not and then dispatch the action\n  const dispatchCanlled = (action) => {\n    if (!isCancelled) {\n      dispatch(action);\n    }\n  };\n\n  let ref = collection(db, col);\n\n  // add document\n  const addDocument = async (mdoc) => {\n    dispatch({ type: 'IS_PENDING' });\n\n    try {\n      const addedDoc = await addDoc(ref, mdoc);\n      dispatchCanlled({ type: 'ADDED_DOCUMENT', payload: addedDoc });\n    } catch (error) {}\n    console.log(mdoc);\n  };\n\n  // remove document\n\n  const removeDoc = async (id) => {\n    dispatch({ type: 'IS_PENDING' });\n\n    try {\n      const deleteddoc = await deleteDoc(doc(db, col, id));\n      dispatchCanlled({ type: 'DELETED_DOCUMENT', payload: deleteddoc });\n    } catch (error) {}\n  };\n\n  return { addDocument };\n};\n"],"mappings":";AAAA,SAASA,UAAU,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AACvD,SAASC,EAAE,QAAQ,oBAAoB;;AAEvC;AACA,SAASC,MAAM,EAAEC,UAAU,EAAEC,SAAS,QAAQ,oBAAoB;AAElE,IAAIC,SAAS,GAAG;EACdC,QAAQ,EAAE,IAAI;EACdC,SAAS,EAAE,KAAK;EAChBC,KAAK,EAAE,IAAI;EACXC,OAAO,EAAE;AACX,CAAC;AAED,OAAO,MAAMC,eAAe,GAAGA,CAACC,KAAK,EAAEC,MAAM,KAAK;EAChD,QAAQA,MAAM,CAACC,IAAI;IACjB,KAAK,YAAY;MACf,OAAO;QAAEN,SAAS,EAAE,IAAI;QAAED,QAAQ,EAAE,IAAI;QAAEE,KAAK,EAAE,IAAI;QAAEC,OAAO,EAAE;MAAM,CAAC;IACzE,KAAK,gBAAgB;MACnB,OAAO;QAAEF,SAAS,EAAE,KAAK;QAAED,QAAQ,EAAEM,MAAM,CAACE,OAAO;QAAEN,KAAK,EAAE,IAAI;QAAEC,OAAO,EAAE;MAAK,CAAC;IACnF,KAAK,OAAO;MACV,OAAO;QAAEF,SAAS,EAAE,KAAK;QAAED,QAAQ,EAAE,IAAI;QAAEE,KAAK,EAAEI,MAAM,CAACE,OAAO;QAAEL,OAAO,EAAE;MAAM,CAAC;IACpF,KAAK,kBAAkB;MACrB,OAAO;QAAEF,SAAS,EAAE,KAAK;QAAED,QAAQ,EAAEM,MAAM,CAACE,OAAO;QAAEN,KAAK,EAAE,IAAI;QAAEC,OAAO,EAAE;MAAK,CAAC;IAEnF;MACE,OAAOE,KAAK;EAAC;AAEnB,CAAC;AAED,OAAO,MAAMI,QAAQ,GAAIC,GAAG,IAAK;EAAAC,EAAA;EAC/B,MAAM,CAACC,QAAQ,EAAEC,QAAQ,CAAC,GAAGrB,UAAU,CAACY,eAAe,EAAEL,SAAS,CAAC;EACnE,MAAM,CAACe,WAAW,EAAEC,cAAc,CAAC,GAAGtB,QAAQ,CAAC,KAAK,CAAC;;EAErD;EACA,MAAMuB,eAAe,GAAIV,MAAM,IAAK;IAClC,IAAI,CAACQ,WAAW,EAAE;MAChBD,QAAQ,CAACP,MAAM,CAAC;IAClB;EACF,CAAC;EAED,IAAIW,GAAG,GAAGpB,UAAU,CAACF,EAAE,EAAEe,GAAG,CAAC;;EAE7B;EACA,MAAMQ,WAAW,GAAG,MAAOC,IAAI,IAAK;IAClCN,QAAQ,CAAC;MAAEN,IAAI,EAAE;IAAa,CAAC,CAAC;IAEhC,IAAI;MACF,MAAMa,QAAQ,GAAG,MAAMxB,MAAM,CAACqB,GAAG,EAAEE,IAAI,CAAC;MACxCH,eAAe,CAAC;QAAET,IAAI,EAAE,gBAAgB;QAAEC,OAAO,EAAEY;MAAS,CAAC,CAAC;IAChE,CAAC,CAAC,OAAOlB,KAAK,EAAE,CAAC;IACjBmB,OAAO,CAACC,GAAG,CAACH,IAAI,CAAC;EACnB,CAAC;;EAED;;EAEA,MAAMI,SAAS,GAAG,MAAOC,EAAE,IAAK;IAC9BX,QAAQ,CAAC;MAAEN,IAAI,EAAE;IAAa,CAAC,CAAC;IAEhC,IAAI;MACF,MAAMkB,UAAU,GAAG,MAAM3B,SAAS,CAAC4B,GAAG,CAAC/B,EAAE,EAAEe,GAAG,EAAEc,EAAE,CAAC,CAAC;MACpDR,eAAe,CAAC;QAAET,IAAI,EAAE,kBAAkB;QAAEC,OAAO,EAAEiB;MAAW,CAAC,CAAC;IACpE,CAAC,CAAC,OAAOvB,KAAK,EAAE,CAAC;EACnB,CAAC;EAED,OAAO;IAAEgB;EAAY,CAAC;AACxB,CAAC;AAACP,EAAA,CApCWF,QAAQ;AAAAkB,EAAA,GAARlB,QAAQ;AAAA,IAAAkB,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}